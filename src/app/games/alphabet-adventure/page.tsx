"use client";

import { useState, useEffect } from 'react';
import { ButtonGames } from '../../../components/ButtonGames';
import styles from '../../../styles/games/alphabet-adventure.module.scss';
import { letters } from '../../../data/letters';
import { playLetters } from './gameLogic';
import { LetterSoundQuestion } from '../../../components/LetterSoundQuestion';

const AlphabetAdventure = () => {
    const [visibleLetters, setVisibleLetters] = useState<string[]>([])
    const [soundEnabled, setSoundEnabled] = useState<boolean>(false)
    const [nextStage, setNextStage] = useState<boolean>(false)

    useEffect(() => {
       if(visibleLetters.length === 26) {
          setTimeout(() => {
             setNextStage(true)
          }, 3000)
       } else {
           setNextStage(false)
       }
    },[visibleLetters])

    useEffect(() => {
        if (!soundEnabled) return;

        letters.forEach((el, index) => {
            setTimeout(() => {
                playLetters(el)
                setVisibleLetters(prev => [...prev, el])
            }, index * 3000)
        })
    }, [soundEnabled])

    const handleLetterClick = (letter: string) => {
        playLetters(letter)
    };

    const handleStartGame = () => {
        setSoundEnabled(true)
    };

    return (
        <div className={styles.wrapper}>
            <h2>–ê–ª—Ñ–∞–≤—ñ—Ç–Ω–∞ –ø—Ä–∏–≥–æ–¥–∞</h2>
            <div className={styles['container-games']}>
                {soundEnabled
                    ? (
                        <section>
                            <ul className={styles['list-letters']}>
                                {visibleLetters.map((el) => (
                                    <li
                                        key={el}
                                        onClick={() => handleLetterClick(el)}
                                    >
                                        {el}
                                    </li>
                                ))}
                            </ul>
                            {nextStage && <LetterSoundQuestion />}
                        </section>
                    ) : (
                        <section className={styles['container-information']}>
                            <h3>–Ø–∫ –≤–∏–≤—á–∏—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É –º–æ–≤—É:</h3>
                            <p>
                                –ü—Ä–∏–≤—ñ—Ç, –º–∞–ª–µ–Ω—å–∫–∏–π –¥–æ—Å–ª—ñ–¥–Ω–∏–∫—É! üåü –í–∏–≤—á–∞—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É –º–æ–≤—É ‚Äì —Ü–µ –≤–µ—Å–µ–ª–æ —ñ –¥—É–∂–µ —Ü—ñ–∫–∞–≤–æ. –ö–æ–ª–∏ —Ç–∏ –∑–Ω–∞—Ç–∏–º–µ—à –∞–Ω–≥–ª—ñ–π—Å—å–∫—É, –∑–º–æ–∂–µ—à —Ä–æ–∑—É–º—ñ—Ç–∏ –ø—ñ—Å–Ω—ñ, –¥–∏–≤–∏—Ç–∏—Å—è –º—É–ª—å—Ç–∏–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∫–ª–∞–¥—É, –≥—Ä–∞—Ç–∏ –≤ —ñ–≥—Ä–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é —Ç–∞ –Ω–∞–≤—ñ—Ç—å –∑–Ω–∞–π—Ç–∏ –¥—Ä—É–∑—ñ–≤ –∑ —ñ–Ω—à–∏—Ö –∫—Ä–∞—ó–Ω!
                                <br />–û—Å—å –∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Å—Ç–∏—Ö –ø–æ—Ä–∞–¥, —è–∫—ñ –¥–æ–ø–æ–º–æ–∂—É—Ç—å —Ç–æ–±—ñ –Ω–∞–≤—á–∏—Ç–∏—Å—è –≥–æ–≤–æ—Ä–∏—Ç–∏, —á–∏—Ç–∞—Ç–∏ —Ç–∞ —Ä–æ–∑—É–º—ñ—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É:
                            </p>
                            <ol>
                                <li>
                                    <h4>–í—á–∏ —Å–ª–æ–≤–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–∞—Ä—Ç–∏–Ω–æ–∫ üé®</h4><br />
                                    <div className={styles['li-content']}>
                                        –ê–Ω–≥–ª—ñ–π—Å—å–∫—ñ —Å–ª–æ–≤–∞ –ª–µ–≥—à–µ –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞—Ç–∏, —è–∫—â–æ —Ç–∏ –±–∞—á–∏—à –∫–∞—Ä—Ç–∏–Ω–∫–∏.
                                        –ù–∞–ø—Ä–∏–∫–ª–∞–¥:
                                        <ul>
                                            <li>üê∂ <span>Dog</span> ‚Äì —Å–æ–±–∞—á–∫–∞</li>
                                            <li>üçè <span>Apple</span> ‚Äì —è–±–ª—É–∫–æ</li>
                                            <li>üåû <span>Sun</span> ‚Äì —Å–æ–Ω–µ—á–∫–æ</li>
                                        </ul>
                                        –ú–æ–∂–µ—à –º–∞–ª—é–≤–∞—Ç–∏ –∞–±–æ —Ä–æ–∑–≥–ª—è–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫–∏ –∑—ñ —Å–ª–æ–≤–∞–º–∏ ‚Äì —Ç–∞–∫ –±—É–¥–µ —Ü—ñ–∫–∞–≤—ñ—à–µ!
                                    </div>
                                </li>
                                <li>
                                    <h4>–î–∏–≤–∏—Å—å –º—É–ª—å—Ç–∏–∫–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é üì∫</h4><br />
                                    <div className={styles['li-content']}>
                                        –¢–∏ –ª—é–±–∏—à –º—É–ª—å—Ç–∏–∫–∏?
                                        <br /> –ê —è–∫—â–æ –¥–∏–≤–∏—Ç–∏—Å—è —ó—Ö –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é –º–æ–≤–æ—é?
                                        <br /> –ú–æ–∂–µ—à –ø–æ—á–∞—Ç–∏ –∑ –ø—Ä–æ—Å—Ç–∏—Ö —ñ –∫–æ—Ä–æ—Ç–∫–∏—Ö –º—É–ª—å—Ç—Ñ—ñ–ª—å–º—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ <span>Peppa Pig –∞–±–æ Dora the Explorer</span>.
                                    </div>
                                </li>
                                <li>
                                    <h4>–ì—Ä–∞–π —É –º–æ–≤–Ω—ñ —ñ–≥—Ä–∏ üé≤</h4><br />
                                    <div className={styles['li-content']}>
                                        –ì—Ä–∞—Ç–∏ ‚Äì —Ü–µ –≤–µ—Å–µ–ª–æ —ñ –∫–æ—Ä–∏—Å–Ω–æ! –Ñ –±–∞–≥–∞—Ç–æ —ñ–≥–æ—Ä –¥–ª—è –≤–∏–≤—á–µ–Ω–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó:
                                        <ul>
                                            <li>–í–≥–∞–¥–∞–π —Å–ª–æ–≤–æ –∑–∞ –∫–∞—Ä—Ç–∏–Ω–∫–æ—é.</li>
                                            <li>–ó–Ω–∞–π–¥–∏ –±—É–∫–≤–∏ —É —Å–ª–æ–≤–∞—Ö.</li>
                                            <li>–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ —Å–ª–æ–≤–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –º–∞–ª—é–Ω–∫–∏.</li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <h4>–ü–æ–≤—Ç–æ—Ä—é–π –∞–ª—Ñ–∞–≤—ñ—Ç üî§</h4><br />
                                    <div className={styles['li-content']}>
                                        –í—á–∏ –±—É–∫–≤–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤—ñ—Ç—É, —Å–ø—ñ–≤–∞–π –ø—ñ—Å–µ–Ω—å–∫—É ABC Song —ñ –ø—Ä–æ–±—É–π –Ω–∞–∑–∏–≤–∞—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–∏, —è–∫—ñ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ –∫–æ–∂–Ω–æ—ó –ª—ñ—Ç–µ—Ä–∏.
                                        <br />–ù–∞–ø—Ä–∏–∫–ª–∞–¥:
                                        <ul>
                                            <li><span>A ‚Äì Apple</span> (—è–±–ª—É–∫–æ)</li>
                                            <li><span>B ‚Äì Ball</span> (–º‚Äô—è—á)</li>
                                            <li><span>C ‚Äì Cat</span> (–∫—ñ—Ç)</li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <h4>–ó–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–π –ø—Ä–æ—Å—Ç—ñ —Ñ—Ä–∞–∑–∏ üó£</h4><br />
                                    <div className={styles['li-content']}>
                                        –ü–æ—á–∏–Ω–∞–π —ñ–∑ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏—Ö —Ñ—Ä–∞–∑:
                                        <ul>
                                            <li><span>Hello!</span> ‚Äì –ü—Ä–∏–≤—ñ—Ç!</li>
                                            <li><span>Good morning!</span> ‚Äì –î–æ–±—Ä–æ–≥–æ —Ä–∞–Ω–∫—É!</li>
                                            <li><span>How are you?</span> ‚Äì –Ø–∫ —Å–ø—Ä–∞–≤–∏?</li>
                                            <li><span>I am fine, thank you!</span> ‚Äì –£ –º–µ–Ω–µ –≤—Å–µ –¥–æ–±—Ä–µ, –¥—è–∫—É—é!</li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <h4>–í—á–∏—Å—è —â–æ–¥–Ω—è –ø–æ —Ç—Ä–æ—Ö–∏ ‚è∞</h4><br />
                                    <div className={styles['li-content']}>
                                        –©–æ–± —à–≤–∏–¥–∫–æ –Ω–∞–≤—á–∏—Ç–∏—Å—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó, –∑–∞–π–º–∞–π—Å—è —â–æ–¥–Ω—è —Ö–æ—á–∞ –± 10‚Äì15 —Ö–≤–∏–ª–∏–Ω.
                                        <br /> –ú–æ–∂–Ω–∞ –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ —Å–ª–æ–≤–∞, —Å–ø—ñ–≤–∞—Ç–∏ –ø—ñ—Å–Ω—ñ, –¥–∏–≤–∏—Ç–∏—Å—è –º—É–ª—å—Ç–∏–∫–∏ –∞–±–æ –≥—Ä–∞—Ç–∏ –≤ —ñ–≥—Ä–∏.
                                    </div>
                                </li>
                            </ol>
                            <p>
                                <strong>–ü–∞–º‚Äô—è—Ç–∞–π:</strong>
                                <br /><i>–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞</i> ‚Äì —Ü–µ —è–∫ —á–∞—Ä—ñ–≤–Ω—ñ –¥–≤–µ—Ä—ñ –≤ –≤–µ–ª–∏–∫–∏–π —Å–≤—ñ—Ç! –í—á–∏—Å—è —â–æ–¥–Ω—è, –≥—Ä–∞–π—Å—è, —Å–ª—É—Ö–∞–π –ø—ñ—Å–µ–Ω—å–∫–∏ ‚Äì —ñ —Ç–∏ –¥—É–∂–µ —à–≤–∏–¥–∫–æ –ø–æ—á–Ω–µ—à —Ä–æ–∑—É–º—ñ—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É. üåçüß∏
                            </p>
                        </section>
                    )
                }
            </div>
            <div className={styles['block-button']}>
                <ButtonGames link="/tasks">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å</ButtonGames>
                <ButtonGames onClick={handleStartGame} disabled={nextStage || soundEnabled}>–ü–æ—á–∞—Ç–∏ –≥—Ä—É</ButtonGames>
            </div>
        </div>
    );
};

export default AlphabetAdventure;

